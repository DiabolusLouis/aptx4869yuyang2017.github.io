{"meta":{"title":"据说能用数据讲故事","subtitle":null,"description":null,"author":"禹洋","url":"http://yoursite.com"},"pages":[],"posts":[{"title":"【图表挑战】如何在Tableau中画雷达图","slug":"mm-19w05-雷达图","date":"2019-02-07T03:06:35.000Z","updated":"2019-02-08T11:47:21.536Z","comments":true,"path":"2019/02/07/mm-19w05-雷达图/","link":"","permalink":"http://yoursite.com/2019/02/07/mm-19w05-雷达图/","excerpt":"","text":"这次还是彻底的模仿，模仿一个卡塔尔兄弟Mahfooj Khan的作品，顺便这次卡塔尔亚洲杯闯入决赛，甚是威武。 一、关于雷达图 交互地址 这是一个对漫威超级英雄能力值可是化的项目。通过雷达图 面积 快速判断英雄的整体强弱，通过 形状 快速判断英雄的类型，例如是敏捷型或者力量型等等。对比两个英雄时候，叠加两个雷达图尤其方便。 劣势：但是雷达图和其他在二维坐标下展示的图表相比，读取具体的数值不是特别方便和直观。 雷达图对多维数据的展示非常直观，从某种角度上也是是一种强化对比的图表类型，实际展示的数值不是最重要的。所以雷达图特别适合这种评分数据。比如这个英雄能力值的评分实际上就是一种对比机制，并不会对实际评分做具体的量化，比如对速度的评分实际并不会和百米速度相关。 这次图表挑战的数据恰巧也是评分数据，评分经过好几层的各种计算、综合，绝对大小已经没有实际意义。做出这个指数的目的就是在于比较不同国家的相对状况，或者衡量进步程度。 这次数据使用的是欧洲国家的 DESI 指数，分别从五个维度测量， 以下的教程主要参考 A Simple Way to Make a Radar Chart 来讲。 也参考了如何在Tableau中使用 雷达图（或蛛网图）- TC17「英文字幕」。 相关数据下载： https://pan.baidu.com/s/13SBr0J4PVKczEL0Uxi6h0A 密码:lm7k 二、雷达图原理Tableau中默认的坐标系是一个二维坐标系，当使用地图的时候才会切换成为地理坐标系。 我们的雷达图实际上是一个极坐标系，每个特征占据一个角度，通过 r 的长度来映射数据。我们想要做的就是把用极坐标描述的图形，在Tableau默认的二维坐标系中画出来。 所以雷达图的整体思路就是逐步翻译的过程： 原始数据 -&gt; 极坐标 -&gt; 二维平面坐标 三、在Tableau中画雷达图第零步：准备工作连接数据 第一步：构建描述极坐标的计算字段这一步就是 原始数据 -&gt; 极坐标 的计算字段的翻译 构建 Angel 计算字段，也就是极坐标中的 角度 参数。 构建Distence from the centre计算字段，也就是极坐标中的 r 参数。 第二步：构建描述二维平面坐标的计算字段极坐标 -&gt; 二维平面坐标 的计算字段的翻译 构建 x 计算字段，就是二维平面坐标的横轴坐标 构建 y 计算字段，就是二维平面坐标的纵轴坐标 第三步：构建五边形 先选择一个国家来画五边形，所以将国家拖入筛选器，在筛选器中只保留一个国家。 将 Indicator 拖放到 详细信息标记卡，设置Indicator排序为逆序。 修改 标记卡 的图表类型为 多边形 将 Angel 字段拖放到 路径标记卡，调整 Angel表计算的依据为依据 Indicator。 将 x 和 y 字段分别拖放至 列功能区 行功能区，并同时调整表计算依据，依据 Indicator。 回顾： 四个计算字段公式的含义 我们现在已经初步完成了一个五边形的绘制，所以短暂回顾一下这几个生成的计算字段所生成的公式到底完成了什么功能。 关于Angel RUNNING_SUM(2*PI()/MIN({COUNTD([Indicator])}))+PI()/2 MIN({countd([Indicator])}) 是用来计算整个数据源一共有多少个Indicator种类，如果你知道只有五个分析维度，实际上这里直接填写5也行2PI()/ 这部分实际上是把整个圆周分成了5份 RUNNING_SUM 我们看到在实际使用过程中，我们表计算的依据选择是 指数 这个字段，实际实现的效果是判断具体的 Indicator具体所在的角度，所以要对评分后的角度进行角度的累加将Angle作为多边形的路径，也是为了告知Tableau怎么对五个点进行连线。 +PI()/2 这部分是为了控制整个圆周的起点，我们可以调整这个值看看图形的效果。没有进行角度转换时，起点是x轴的正向方向 +PI() 的效果是轴的起始方向放到了x轴负方向。Distence from the centre Distence from the centre 就是计算了橘黄色线段的长度，使用维度的分数来映射。 x y* 的计算起始就是极坐标向二维平面坐标的转换。 第四步：添加背景 打开背景设定窗口 地图菜单 - 背景图像 - 数据源 添加背景分享文件中的背景图片 最终效果 简单的加入一个国家数据，然后将国家拖入颜色标记卡，调整颜色透明度，可以看到两国五维数据的对比。 第五步：美化这一步想加入一些点元素，强化维度数据的位置信息。 再拖放一个x字段到 列功能区，同时做 双轴 - 同步轴操作 将两个 标记卡 中的 度量名称 的 颜色标记卡 都删除掉 将新添加的 标记卡 修改为 圆 类型，调整一下颜色 最后效果最后清理一下轴和边框 完成！ 四、图表挑战中的具体应用这次尝试了一次长图式的排版，因为Tableau不能全屏显示排版，甚是痛苦，考虑到Tableau的主要服务对象暂时还不包括手机移动端，以后还是暂时不尝试长图了。 Columns 字段 (INDEX()-1)%[col_num] Rows 字段 INT((INDEX()-1)/[col_num]) 其实还是排上次六边形地图的套路，表计算的依据设置为 国家 国家的备注还是放到 仪表板 来排。 五、总结关于数据我个人觉得其实这次图表挑战的第一个关键点是对数据的理解。 和前几次图表挑战的 宠物数量，红酒产量，失业率相比，原始数据中的数据只是一个分数，挑战题目只是简单翻译了一下并没有介绍，所以搞清楚这些数据采集计算方式，才不会出一些原则性的错误。 资料具体可以查看官网，甚至中文百度也能找到一些有用的信息，我就不多引用数据了。 关于雷达图的设计这次做的还是基本没有交互设计的部分，但从五边形的覆盖对比角度其实就能增加一些交互功能，来丰富图表能够传达的信息。 比如就像我们的教程中一个雷达图中，叠加多国数据可以对比各个维度的优劣，当然也可以叠加统计数据，比如多国指标均值，多国指标中位数等。 比如可以增加年份的选项来进行叠加对比能够清晰的看到每个国家的各个维度指标变化的状况。 其实是我做图还不熟练，有些涉及到叠加的工作，还没想好数据怎么预先处理，所以有些想法只能暂时搁置。 Andy 自己画的几张图组织者Andy在2月1日也做了一个简短复盘，我们可以看看他的选择。 第一张是一个杠铃图的变种，没有交互设计，选择展示的主要信息还是各国 5年总体指标的进步 。 第二张是连线散点图，交互设计可以选择想要着重看的国家和两个维度。这张完全没法看综合指标，所以重点是看单个指标的变化情况。 第三张是 跳动图(Jitter Plot)，交互设计可选国家。整体展示了5年各国各个维度的分数分布，重点信息是展示了选定国家的指标在分布中的位置，可以说这张是单页信息覆盖最多的。 第四张是雷达图，没有交互设计，只显示2018年。和我们不同的是，设计了色调来展示整体分数，其实我觉得雷达图面积已经能够反映一定信息了。 看了四张图，其实我们也可以大体整理一下常规的图表展示的思路了。其实无非就是： 想要表达的重点 -&gt; 选择合适的图表 所以，我觉得我在日后图表挑战中尽量从不同关系 比较 分布 构成 等不同角度分析数据，为的是能够尽量熟悉各种图表的画法。 六、参考文章A Simple Way to Make a Radar Chart","categories":[{"name":"Tableau可视化","slug":"Tableau可视化","permalink":"http://yoursite.com/categories/Tableau可视化/"}],"tags":[{"name":"图表挑战","slug":"图表挑战","permalink":"http://yoursite.com/tags/图表挑战/"},{"name":"可视化","slug":"可视化","permalink":"http://yoursite.com/tags/可视化/"},{"name":"图表技巧","slug":"图表技巧","permalink":"http://yoursite.com/tags/图表技巧/"}]},{"title":"markdown 测试文档","slug":"markdown-test","date":"2019-02-01T08:30:42.000Z","updated":"2019-02-07T08:38:19.334Z","comments":true,"path":"2019/02/01/markdown-test/","link":"","permalink":"http://yoursite.com/2019/02/01/markdown-test/","excerpt":"","text":"『Cmd 技术渲染的沙箱页面，点击此处编写自己的文档』 Cmd Markdown 简明语法手册标签： Cmd-Markdown 1. 斜体和粗体使用 * 和 ** 表示斜体和粗体。 示例： 这是 斜体，这是 粗体。 2. 分级标题使用 === 表示一级标题，使用 — 表示二级标题。 示例： 1234567这是一个一级标题============================这是一个二级标题--------------------------------------------------### 这是一个三级标题 你也可以选择在行首加井号表示不同级别的标题 (H1-H6)，例如：# H1, ## H2, ### H3，#### H4。 3. 外链接使用 [描述](链接地址) 为文字增加外链接。 示例： 这是去往 本人博客 的链接。 4. 无序列表使用 *，+，- 表示无序列表。 示例： 无序列表项 一 无序列表项 二 无序列表项 三 5. 有序列表使用数字和点表示有序列表。 示例： 有序列表项 一 有序列表项 二 有序列表项 三 6. 文字引用使用 &gt; 表示文字引用。 示例： 野火烧不尽，春风吹又生。 7. 行内代码块使用 `代码` 表示行内代码块。 示例： 让我们聊聊 html。 8. 代码块使用 四个缩进空格 表示代码块。 示例： 这是一个代码块，此行左侧有四个不可见的空格。 9. 插入图像使用 ![描述](图片链接地址) 插入图像。 示例： Cmd Markdown 高阶语法手册1. 内容目录在段落中填写 [TOC] 以显示全文内容的目录结构。 [TOC] 2. 标签分类在编辑区任意行的列首位置输入以下代码给文稿标签： 标签： 数学 英语 Markdown 或者 Tags： 数学 英语 Markdown 3. 删除线使用 ~~ 表示删除线。 这是一段错误的文本。 4. 注脚使用 [^keyword] 表示注脚。 这是一个注脚[^footnote]的样例。 这是第二个注脚[^footnote2]的样例。 5. LaTeX 公式$ 表示行内公式： 质能守恒方程可以用一个很简洁的方程式 $E=mc^2$ 来表达。 $$ 表示整行公式： $$\\sum_{i=1}^n a_i=0$$ $$f(x_1,x_x,\\ldots,x_n) = x_1^2 + x_2^2 + \\cdots + x_n^2 $$ $$\\sum^{j-1}{k=0}{\\widehat{\\gamma}{kj} z_k}$$ 访问 MathJax 参考更多使用方法。 6. 加强的代码块支持四十一种编程语言的语法高亮的显示，行号显示。 非代码示例： 1$ sudo apt-get install vim-gnome Python 示例： 123456789101112@requires_authorizationdef somefunc(param1='', param2=0): '''A docstring''' if param1 &gt; param2: # interesting print 'Greater' return (param2 - param1 + 1) or Noneclass SomeClass: pass&gt;&gt;&gt; message = '''interpreter... prompt''' JavaScript 示例： 1234567891011121314151617/*** nth element in the fibonacci series.* @param n &gt;= 0* @return the nth element, &gt;= 0.*/function fib(n) &#123; var a = 1, b = 1; var tmp; while (--n &gt;= 0) &#123; tmp = a; a += b; b = tmp; &#125; return a;&#125;document.write(fib(10)); 7. 流程图示例12345678910st=&gt;start: Start:&gt;https://www.zybuluo.comio=&gt;inputoutput: verificationop=&gt;operation: Your Operationcond=&gt;condition: Yes or No?sub=&gt;subroutine: Your Subroutinee=&gt;endst-&gt;io-&gt;op-&gt;condcond(yes)-&gt;econd(no)-&gt;sub-&gt;io 更多语法参考：流程图语法参考8. 序列图示例 1123Alice-&gt;Bob: Hello Bob, how are you?Note right of Bob: Bob thinksBob--&gt;Alice: I am good thanks! 示例 212345Title: Here is a titleA-&gt;B: Normal lineB--&gt;C: Dashed lineC-&gt;&gt;D: Open arrowD--&gt;&gt;A: Dashed open arrow 更多语法参考：序列图语法参考9. 甘特图甘特图内在思想简单。基本是一条线条图，横轴表示时间，纵轴表示活动（项目），线条表示在整个期间上计划和实际的活动完成情况。它直观地表明任务计划在什么时候进行，及实际进展与计划要求的对比。 12345678910111213title 项目开发流程section 项目确定 需求分析 :a1, 2016-06-22, 3d 可行性报告 :after a1, 5d 概念验证 : 5dsection 项目实施 概要设计 :2016-07-05 , 5d 详细设计 :2016-07-08, 10d 编码 :2016-07-15, 10d 测试 :2016-07-22, 5dsection 发布验收 发布: 2d 验收: 3d 更多语法参考：甘特图语法参考10. Mermaid 流程图1234A[Hard edge] --&gt;|Link text| B(Round edge)B --&gt; C&#123;Decision&#125;C --&gt;|One| D[Result one]C --&gt;|Two| E[Result two] 更多语法参考：Mermaid 流程图语法参考11. Mermaid 序列图1234Alice-&gt;John: Hello John, how are you?loop every minute John--&gt;Alice: Great!end 更多语法参考：Mermaid 序列图语法参考12. 表格支持 项目 价格 数量 计算机 \\$1600 5 手机 \\$12 12 管线 \\$1 234 13. 定义型列表名词 1: 定义 1（左侧有一个可见的冒号和四个不可见的空格） 代码块 2: 这是代码块的定义（左侧有一个可见的冒号和四个不可见的空格） 代码块（左侧有八个不可见的空格） 14. Html 标签本站支持在 Markdown 语法中嵌套 Html 标签，譬如，你可以用 Html 写一个纵跨两行的表格： &lt;table&gt; &lt;tr&gt; &lt;th rowspan=&quot;2&quot;&gt;值班人员&lt;/th&gt; &lt;th&gt;星期一&lt;/th&gt; &lt;th&gt;星期二&lt;/th&gt; &lt;th&gt;星期三&lt;/th&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;李强&lt;/td&gt; &lt;td&gt;张明&lt;/td&gt; &lt;td&gt;王平&lt;/td&gt; &lt;/tr&gt; &lt;/table&gt; 值班人员 星期一 星期二 星期三 李强 张明 王平 15. 内嵌图标本站的图标系统对外开放，在文档中输入 &lt;i class=&quot;icon-weibo&quot;&gt;&lt;/i&gt; 即显示微博的图标： 替换 上述 i 标签 内的 icon-weibo 以显示不同的图标，例如： &lt;i class=&quot;icon-renren&quot;&gt;&lt;/i&gt; 即显示人人的图标： 更多的图标和玩法可以参看 font-awesome 官方网站。 16. 待办事宜 Todo 列表使用带有 [ ] 或 [x] （未完成或已完成）项的列表语法撰写一个待办事宜列表，并且支持子列表嵌套以及混用Markdown语法，例如： - [ ] **Cmd Markdown 开发** - [ ] 改进 Cmd 渲染算法，使用局部渲染技术提高渲染效率 - [ ] 支持以 PDF 格式导出文稿 - [x] 新增Todo列表功能 [语法参考](https://github.com/blog/1375-task-lists-in-gfm-issues-pulls-comments) - [x] 改进 LaTex 功能 - [x] 修复 LaTex 公式渲染问题 - [x] 新增 LaTex 公式编号功能 [语法参考](http://docs.mathjax.org/en/latest/tex.html#tex-eq-numbers) - [ ] **七月旅行准备** - [ ] 准备邮轮上需要携带的物品 - [ ] 浏览日本免税店的物品 - [x] 购买蓝宝石公主号七月一日的船票 对应显示如下待办事宜 Todo 列表： Cmd Markdown 开发 改进 Cmd 渲染算法，使用局部渲染技术提高渲染效率 支持以 PDF 格式导出文稿 新增Todo列表功能 语法参考 改进 LaTex 功能 修复 LaTex 公式渲染问题 新增 LaTex 公式编号功能 语法参考 七月旅行准备 准备邮轮上需要携带的物品 浏览日本免税店的物品 购买蓝宝石公主号七月一日的船票 [^footnote]: 这是一个 注脚 的 文本。 [^footnote2]: 这是另一个 注脚 的 文本。","categories":[],"tags":[]}]}